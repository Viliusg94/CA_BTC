{% extends "base.html" %}

{% block title %}Bitcoin Modeliai{% endblock %}

{% block content %}
<h1 class="text-center mb-4">
    <i class="fas fa-brain text-info"></i>
    AI Modelių Valdymas
</h1>

<!-- Navigation -->
<div class="row mb-4">
    <div class="col-12 text-center">
        <a href="/" class="btn btn-secondary me-2">
            <i class="fas fa-home"></i> Pagrindinis
        </a>
        <a href="/predict" class="btn btn-primary me-2">
            <i class="fas fa-chart-line"></i> Prognozės
        </a>
        <a href="/models" class="btn btn-info me-2">
            <i class="fas fa-brain"></i> Modeliai
        </a>
        <a href="/history" class="btn btn-secondary me-2">
            <i class="fas fa-history"></i> Istorija
        </a>
        <a href="/training_status" class="btn btn-success">
            <i class="fas fa-tasks"></i> Apmokymas
        </a>
    </div>
</div>

<!-- Model Management Cards -->
<div class="row mb-4">
    <!-- LSTM Model Card -->
    <div class="col-lg-6 mb-4">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-network-wired"></i> LSTM Modelis
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Long Short-Term Memory tinklas Bitcoin kainų prognozavimui.</p>
                
                <div class="row mb-3">
                    <div class="col-6">
                        <strong>Būsena:</strong>
                        <span class="badge bg-success">Aktyvus</span>
                    </div>
                    <div class="col-6">
                        <strong>Tikslumas:</strong>
                        <span class="text-success">85.7%</span>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-6">
                        <strong>Apmokytas:</strong>
                        <small class="text-muted">2024-01-15</small>
                    </div>
                    <div class="col-6">
                        <strong>Epochos:</strong>
                        <span>100</span>
                    </div>
                </div>
                
                <div class="btn-group w-100" role="group">
                    <button type="button" class="btn btn-outline-primary">
                        <i class="fas fa-play"></i> Treniruoti
                    </button>
                    <button type="button" class="btn btn-outline-info">
                        <i class="fas fa-eye"></i> Peržiūrėti
                    </button>
                    <button type="button" class="btn btn-outline-secondary">
                        <i class="fas fa-download"></i> Išsaugoti
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- GRU Model Card -->
    <div class="col-lg-6 mb-4">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="m-0 font-weight-bold text-success">
                    <i class="fas fa-project-diagram"></i> GRU Modelis
                </h5>
            </div>
            <div class="card-body">
                <p class="card-text">Gated Recurrent Unit tinklas trumpalaikėms prognozėms.</p>
                
                <div class="row mb-3">
                    <div class="col-6">
                        <strong>Būsena:</strong>
                        <span class="badge bg-warning">Treniruojamas</span>
                    </div>
                    <div class="col-6">
                        <strong>Tikslumas:</strong>
                        <span class="text-warning">78.3%</span>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-6">
                        <strong>Apmokytas:</strong>
                        <small class="text-muted">2024-01-10</small>
                    </div>
                    <div class="col-6">
                        <strong>Epochos:</strong>
                        <span>75</span>
                    </div>
                </div>
                
                <div class="progress mb-3">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 65%">
                        65% (Epoch 65/100)
                    </div>
                </div>
                
                <div class="btn-group w-100" role="group">
                    <button type="button" class="btn btn-outline-warning" disabled>
                        <i class="fas fa-pause"></i> Pristabdyti
                    </button>
                    <button type="button" class="btn btn-outline-info">
                        <i class="fas fa-eye"></i> Peržiūrėti
                    </button>
                    <button type="button" class="btn btn-outline-secondary">
                        <i class="fas fa-download"></i> Išsaugoti
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Model Configuration -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-cogs"></i> Modelio Konfigūracija
                </h5>
            </div>
            <div class="card-body">
                <form>
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="model-type" class="form-label">Modelio Tipas</label>
                            <select class="form-select" id="model-type">
                                <option value="lstm">LSTM</option>
                                <option value="gru">GRU</option>
                                <option value="transformer">Transformer</option>
                            </select>
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <label for="epochs" class="form-label">Epochų Skaičius</label>
                            <input type="number" class="form-control" id="epochs" value="100" min="10" max="1000">
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <label for="batch-size" class="form-label">Batch Dydis</label>
                            <input type="number" class="form-control" id="batch-size" value="32" min="8" max="256">
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label for="learning-rate" class="form-label">Mokymosi Greitis</label>
                            <input type="number" class="form-control" id="learning-rate" value="0.001" step="0.0001" min="0.0001" max="0.1">
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <label for="sequence-length" class="form-label">Sekos Ilgis</label>
                            <input type="number" class="form-control" id="sequence-length" value="60" min="10" max="365">
                        </div>
                        
                        <div class="col-md-4 mb-3">
                            <label for="hidden-units" class="form-label">Paslėptų Vienetų Skaičius</label>
                            <input type="number" class="form-control" id="hidden-units" value="128" min="32" max="512">
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-rocket"></i> Pradėti Treniravimą
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Training History -->
<div class="row">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header">
                <h5 class="m-0 font-weight-bold text-primary">
                    <i class="fas fa-history"></i> Treniravimo Istorija
                </h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-dark table-striped">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Modelis</th>
                                <th>Epochos</th>
                                <th>Tikslumas</th>
                                <th>Nuostoliai</th>
                                <th>Trukmė</th>
                                <th>Veiksmai</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2024-01-15</td>
                                <td><span class="badge bg-primary">LSTM</span></td>
                                <td>100</td>
                                <td><span class="text-success">85.7%</span></td>
                                <td>0.0234</td>
                                <td>2h 34m</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-info">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-01-10</td>
                                <td><span class="badge bg-success">GRU</span></td>
                                <td>75</td>
                                <td><span class="text-warning">78.3%</span></td>
                                <td>0.0456</td>
                                <td>1h 45m</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-info">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-success">
                                        <i class="fas fa-download"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>2024-01-05</td>
                                <td><span class="badge bg-primary">LSTM</span></td>
                                <td>50</td>
                                <td><span class="text-danger">72.1%</span></td>
                                <td>0.0678</td>
                                <td>1h 12m</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-info">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Model configuration form handling
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const modelType = document.getElementById('model-type').value;
            const epochs = document.getElementById('epochs').value;
            const batchSize = document.getElementById('batch-size').value;
            const learningRate = document.getElementById('learning-rate').value;
            const sequenceLength = document.getElementById('sequence-length').value;
            const hiddenUnits = document.getElementById('hidden-units').value;
            
            // Show loading state
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalHTML = submitBtn.innerHTML;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Pradedamas treniravimas...';
            submitBtn.disabled = true;
            
            // Simulate training start
            setTimeout(() => {
                alert(`Treniravimas pradėtas!\nModelis: ${modelType.toUpperCase()}\nEpochos: ${epochs}\nBatch: ${batchSize}`);
                submitBtn.innerHTML = originalHTML;
                submitBtn.disabled = false;
            }, 2000);
        });
    }
    
    // Add click handlers for action buttons
    document.querySelectorAll('.btn-outline-info').forEach(btn => {
        btn.addEventListener('click', function() {
            alert('Modelio peržiūra - funkcija bus implementuota');
        });
    });
    
    document.querySelectorAll('.btn-outline-success').forEach(btn => {
        btn.addEventListener('click', function() {
            alert('Modelio išsaugojimas - funkcija bus implementuota');
        });
    });
});
</script>
{% endblock %}